pipeline {
		options {timestamps()}
		
		agent none
		stages {
			stage('Check scm'){
				agent any
				steps{
					checkout scm
				}
			}
			stage('Build'){
				steps{
					echo "Building ...${BUILD_NUMBER}"
					echo "Build compleated"
				}
			}
			stage('Test'){
				agent{docker {image 'alpine'
						args '-u=\"root\"'
						}
					}
				steps{
					sh "mkdir build && cd build"
   					sh "cmake -G Ninja <workpace-root>/source"
   					sh "DESTDIR=<workpace-root>/artifacts ninja all install"
				}
				post{
					success{
						echo "Application compleated"
					}
					failure{
						echo "Smth wrong"
					}
				}
			}
		}

	}